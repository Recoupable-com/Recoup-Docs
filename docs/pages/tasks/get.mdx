---
title: Get Tasks
description: API endpoint to retrieve scheduled tasks with optional filtering.
---

# Get Tasks

Retrieve scheduled tasks from the database. Tasks have cron-based execution schedules.

You can filter tasks using the following optional parameters:

- If `id` is provided, returns a single task matching that ID
- If `account_id` is provided, returns only tasks for that account
- If `artist_account_id` is provided, returns only tasks for that artist account

If no parameters are provided, returns an array of all tasks.

## Endpoint

```http
GET https://api.recoupable.com/api/tasks
```

## GET Parameters

| Name              | Type   | Required | Description                                                                    |
| ----------------- | ------ | -------- | ------------------------------------------------------------------------------ |
| id                | string | No       | Optional. Returns a single task matching the provided ID.                      |
| account_id        | string | No       | Optional. Filter tasks to only include those for the specified account.        |
| artist_account_id | string | No       | Optional. Filter tasks to only include those for the specified artist account. |

## Request Examples

:::code-group

```bash [cURL]
curl -X GET "https://api.recoupable.com/api/tasks" \
  -H "Content-Type: application/json"
```

```bash [cURL - With ID]
curl -X GET "https://api.recoupable.com/api/tasks?id=aade2bce-55c7-468e-a606-c4e76fb2ea2k" \
  -H "Content-Type: application/json"
```

```bash [cURL - Filter by Account ID]
curl -X GET "https://api.recoupable.com/api/tasks?account_id=848cd58d-700f-4b38-ab4c-d9f52a1b2c3d" \
  -H "Content-Type: application/json"
```

```bash [cURL - Filter by Artist Account ID]
curl -X GET "https://api.recoupable.com/api/tasks?artist_account_id=1873859c-dd37-4e9a-9bac-80d35a1b2c3d" \
  -H "Content-Type: application/json"
```

```python [Python]
import requests

def get_tasks(task_id: str = None, account_id: str = None, artist_account_id: str = None):
    try:
        url = "https://api.recoupable.com/api/tasks"
        params = {}
        if task_id:
            params["id"] = task_id
        if account_id:
            params["account_id"] = account_id
        if artist_account_id:
            params["artist_account_id"] = artist_account_id
        headers = {"Content-Type": "application/json"}
        response = requests.get(url, params=params, headers=headers)
        response.raise_for_status()
        return response.json()
    except requests.exceptions.RequestException as error:
        print(f"Error fetching tasks: {error}")
        raise

# Example usage:
# tasks = get_tasks()  # Get all tasks
# task = get_tasks(task_id="aade2bce-55c7-468e-a606-c4e76fb2ea2k")  # Get single task
# account_tasks = get_tasks(account_id="848cd58d-700f-4b38-ab4c-d9f52a1b2c3d")  # Get tasks for account
# artist_tasks = get_tasks(artist_account_id="1873859c-dd37-4e9a-9bac-80d35a1b2c3d")  # Get tasks for artist
```

```javascript [JavaScript]
async function getTasks(
  taskId = null,
  accountId = null,
  artistAccountId = null
) {
  try {
    const params = new URLSearchParams();
    if (taskId) params.append("id", taskId);
    if (accountId) params.append("account_id", accountId);
    if (artistAccountId) params.append("artist_account_id", artistAccountId);

    const queryString = params.toString();
    const url = `https://api.recoupable.com/api/tasks${
      queryString ? `?${queryString}` : ""
    }`;

    const response = await fetch(url, {
      headers: {
        "Content-Type": "application/json",
      },
    });

    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    const data = await response.json();
    return data;
  } catch (error) {
    console.error("Error fetching tasks:", error);
    throw error;
  }
}

// Example usage:
// const tasks = await getTasks();  // Get all tasks
// const task = await getTasks("aade2bce-55c7-468e-a606-c4e76fb2ea2k");  // Get single task
// const accountTasks = await getTasks(null, "848cd58d-700f-4b38-ab4c-d9f52a1b2c3d");  // Get tasks for account
// const artistTasks = await getTasks(null, null, "1873859c-dd37-4e9a-9bac-80d35a1b2c3d");  // Get tasks for artist
```

```typescript [TypeScript]
interface Task {
  id: string;
  title: string;
  prompt: string;
  schedule: string;
  account_id: string;
  artist_account_id: string;
  enabled: boolean | null;
  trigger_schedule_id: string | null;
}

interface TasksResponse {
  status: "success" | "error";
  tasks: Task[];
  error?: string;
}

async function getTasks(
  taskId?: string,
  accountId?: string,
  artistAccountId?: string
): Promise<TasksResponse> {
  const params = new URLSearchParams();
  if (taskId) params.append("id", taskId);
  if (accountId) params.append("account_id", accountId);
  if (artistAccountId) params.append("artist_account_id", artistAccountId);

  const queryString = params.toString();
  const url = `https://api.recoupable.com/api/tasks${
    queryString ? `?${queryString}` : ""
  }`;

  const response = await fetch(url, {
    headers: {
      "Content-Type": "application/json",
    },
  });

  if (!response.ok) {
    throw new Error(`HTTP error! status: ${response.status}`);
  }

  return (await response.json()) as TasksResponse;
}

// Example usage:
// const tasks = await getTasks();  // Get all tasks
// const task = await getTasks("aade2bce-55c7-468e-a606-c4e76fb2ea2k");  // Get single task
// const accountTasks = await getTasks(undefined, "848cd58d-700f-4b38-ab4c-d9f52a1b2c3d");  // Get tasks for account
// const artistTasks = await getTasks(undefined, undefined, "1873859c-dd37-4e9a-9bac-80d35a1b2c3d");  // Get tasks for artist
```

:::

## Response Format

The API returns JSON responses with task data. When an `id` parameter is provided, the response contains a single task in the array. When omitted, all tasks are returned.

```json filename="Response - All Tasks"
{
  "status": "success",
  "tasks": [
    {
      "id": "aade2bce-55c7-468e-a606-c4e76fb2ea2k",
      "title": "Daily Hip-Hop History Caption and Email",
      "prompt": "Search the web for the most culturally significant hip-hop event that happened on this date in history, then create a compelling social media caption and email to send to the artist's fanbase.",
      "schedule": "0 10 * * *",
      "account_id": "df1652b7-9a8e-4f3c-8b2d-1e4f5a6b7c8d",
      "artist_account_id": "1873859c-dd37-4e9a-9bac-80d35a1b2c3d",
      "enabled": true,
      "trigger_schedule_id": null
    },
    {
      "id": "6388ca52-b1b7-41e7-a48d-404b4d05016f",
      "title": "Daily Trends Report: Sunday (1994) - 9AM",
      "prompt": "Daily task for artist_account_id: 6606edd... Generate a comprehensive trends report covering music industry news, social media trends, and relevant cultural events.",
      "schedule": "0 9 * * *",
      "account_id": "d15d5708-700f-4b38-ab4c-d9f52a1b2c3d",
      "artist_account_id": "1873859c-dd37-4e9a-9bac-80d35a1b2c3d",
      "enabled": true,
      "trigger_schedule_id": null
    },
    {
      "id": "e32aa16b-7069-4c29-8935-fadf7bca8471",
      "title": "Weekly New Fan Finder",
      "prompt": "Check if file 'weekly_new_fan_finder.txt' exists. If not, run the new fan discovery workflow to identify and analyze new fans across all social platforms.",
      "schedule": "0 10 * * 2",
      "account_id": "848cd58d-700f-4b38-ab4c-d9f52a1b2c3d",
      "artist_account_id": "1873859c-dd37-4e9a-9bac-80d35a1b2c3d",
      "enabled": true,
      "trigger_schedule_id": null
    }
  ]
}
```

```json filename="Response - Single Task (with id parameter)"
{
  "status": "success",
  "tasks": [
    {
      "id": "aade2bce-55c7-468e-a606-c4e76fb2ea2k",
      "title": "Daily Hip-Hop History Caption and Email",
      "prompt": "Search the web for the most culturally significant hip-hop event that happened on this date in history, then create a compelling social media caption and email to send to the artist's fanbase.",
      "schedule": "0 10 * * *",
      "account_id": "df1652b7-9a8e-4f3c-8b2d-1e4f5a6b7c8d",
      "artist_account_id": "1873859c-dd37-4e9a-9bac-80d35a1b2c3d",
      "enabled": true
    }
  ]
}
```

## Response Properties

### Response Object

| Property | Type   | Description                                          |
| -------- | ------ | ---------------------------------------------------- |
| status   | string | Status of the request ("success" or "error")         |
| tasks    | array  | Array of task objects (single item if `id` provided) |
| error    | string | Error message (only present if status is "error")    |

### Task Object

| Property            | Type    | Description                                                                      |
| ------------------- | ------- | -------------------------------------------------------------------------------- |
| id                  | string  | Unique identifier for the task (UUID)                                            |
| title               | string  | Descriptive title or name of the task                                            |
| prompt              | string  | Detailed instruction or prompt associated with the task execution                |
| schedule            | string  | Cron expression defining when the task should execute (e.g., "0 10 \* \* \*")    |
| account_id          | string  | Unique identifier for the associated account (UUID)                              |
| artist_account_id   | string  | Unique identifier for the associated artist account (UUID)                       |
| enabled             | boolean | Whether the task is enabled. Defaults to `true` if not specified. Can be `null`. |
| trigger_schedule_id | string  | Identifier for the trigger schedule associated with this task. Can be `null`.    |

## Schedule Format (Cron)

The `schedule` field uses standard cron expression format:

```
┌───────────── minute (0 - 59)
│ ┌───────────── hour (0 - 23)
│ │ ┌───────────── day of month (1 - 31)
│ │ │ ┌───────────── month (1 - 12)
│ │ │ │ ┌───────────── day of week (0 - 6) (Sunday to Saturday)
│ │ │ │ │
* * * * *
```

### Common Examples

- `0 10 * * *` - Daily at 10:00 AM
- `0 9 * * *` - Daily at 9:00 AM
- `0 10 * * 2` - Every Tuesday at 10:00 AM
- `0 16 * * 5` - Every Friday at 4:00 PM
- `0 9 * * 1` - Every Monday at 9:00 AM

## Database Schema

This endpoint queries the `scheduled_actions` table:

### Scheduled Actions Table

- **Primary Key**: `id` (uuid, not null, default gen_random_uuid())
- **Fields**:
  - `title` (text, not null) - Task title
  - `prompt` (text, not null) - Task execution prompt/instructions
  - `schedule` (text, not null) - Cron expression for task scheduling
  - `account_id` (uuid, not null) - Foreign key to accounts table
  - `artist_account_id` (uuid, not null) - Foreign key to artist accounts table
  - `enabled` (boolean, null, default true) - Task enable/disable flag
  - `trigger_schedule_id` (text, null) - Identifier for the trigger schedule associated with this task
