---
title: Get Songs
description: API endpoint to retrieve songs from the database with optional filtering by ISRC or artist account.
---

# Get Songs

Retrieve songs from the database with optional filtering by ISRC (International Standard Recording Code) or artist account. This endpoint joins the songs table with song_artists and accounts tables to provide comprehensive song information.

## Endpoint

```http
GET https://api.recoupable.com/api/songs
POST https://api.recoupable.com/api/songs
```

## Parameters

| Name              | Type   | Required | Description                                                      |
| ----------------- | ------ | -------- | ---------------------------------------------------------------- |
| isrc              | string | No       | International Standard Recording Code to filter by specific song |
| artist_account_id | string | No       | Artist account ID to filter songs by artist                      |

## POST Parameters

| Name          | Type             | Required | Description                                                                            |
| ------------- | ---------------- | -------- | -------------------------------------------------------------------------------------- |
| songs         | array of objects | Yes      | Array of song inputs for bulk create/fetch. Each item supports fields below.           |
| songs[].isrc  | string           | Yes      | International Standard Recording Code of the song to create or fetch                   |
| songs[].name  | string           | No       | Optional. Applied only if internal search cannot find valid info for the provided ISRC |
| songs[].album | string           | No       | Optional. Applied only if internal search cannot find valid info for the provided ISRC |
| songs[].notes | string           | No       | Optional. Applied only if internal search cannot find valid info for the provided ISRC |

## Request Examples

::::code-group

```bash [cURL]
curl -X GET "https://api.recoupable.com/api/songs?artist_account_id=YOUR_ARTIST_ID" \
  -H "Content-Type: application/json"
```

```bash [cURL - POST]
curl -X POST "https://api.recoupable.com/api/songs" \
  -H "Content-Type: application/json" \
  -d '{
    "songs": [
      { "isrc": "USRC17607839", "name": "Bohemian Rhapsody", "album": "A Night at the Opera" },
      { "isrc": "USRC17607840" }
    ]
  }'
```

```python [Python]
import requests

def create_or_fetch_songs(items: list[dict]):
    try:
        url = "https://api.recoupable.com/api/songs"
        payload = {"songs": items}
        headers = {"Content-Type": "application/json"}
        response = requests.post(url, json=payload, headers=headers)
        response.raise_for_status()
        return response.json()
    except requests.exceptions.RequestException as error:
        print(f"Error creating/fetching songs: {error}")
        raise

# Example usage:
# result = create_or_fetch_songs([
#   {"isrc": "USRC17607839", "name": "Bohemian Rhapsody"},
#   {"isrc": "USRC17607840"}
# ])
```

```javascript [JavaScript]
async function createOrFetchSongs(songInputs) {
  try {
    const response = await fetch("https://api.recoupable.com/api/songs", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ songs: songInputs }),
    });
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
    return await response.json();
  } catch (error) {
    console.error("Error creating/fetching songs:", error);
    throw error;
  }
}

// Example usage:
// const result = await createOrFetchSongs([
//   { isrc: "USRC17607839", name: "Bohemian Rhapsody" },
//   { isrc: "USRC17607840" }
// ]);
```

```typescript [TypeScript]
interface Song {
  isrc: string;
  name: string;
  album: string;
  notes: string;
  updated_at: string;
  artists: Array<{
    id: string;
    name: string | null;
    timestamp: number | null;
  }>;
}

interface SongsResponse {
  status: "success" | "error";
  songs: Song[];
  error?: string;
}

interface CreateSongInput {
  isrc: string;
  name?: string;
  album?: string;
  notes?: string;
}

async function createOrFetchSongs(
  inputs: CreateSongInput[]
): Promise<SongsResponse> {
  try {
    const response = await fetch("https://api.recoupable.com/api/songs", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ songs: inputs }),
    });
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
    const data: SongsResponse = await response.json();
    return data;
  } catch (error) {
    console.error("Error creating/fetching songs:", error);
    throw error;
  }
}
```

::::

## Response Format

The API returns JSON responses with song data including associated artist information:

```json filename="Response"
{
  "status": "success",
  "songs": [
    {
      "isrc": "USRC17607839",
      "name": "Bohemian Rhapsody",
      "album": "A Night at the Opera",
      "notes": "Is this the real life? Is this just fantasy? Caught in a landslide, no escape from reality...",
      "updated_at": "2024-03-06T15:33:27Z",
      "artists": [
        {
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "name": "Queen",
          "timestamp": 1640995200000
        }
      ]
    },
    {
      "isrc": "USRC17607840",
      "name": "We Will Rock You",
      "album": "News of the World",
      "notes": "Buddy, you're a boy, make a big noise, playing in the street, gonna be a big man someday...",
      "updated_at": "2024-03-05T18:22:15Z",
      "artists": [
        {
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "name": "Queen",
          "timestamp": 1640995200000
        }
      ]
    }
  ]
}
```

## Response Properties

### Response Object

| Property | Type   | Description                                       |
| -------- | ------ | ------------------------------------------------- |
| status   | string | Status of the request ("success" or "error")      |
| songs    | array  | Array of song objects with artist information     |
| error    | string | Error message (only present if status is "error") |

### Song Object

| Property            | Type   | Description                                                |
| ------------------- | ------ | ---------------------------------------------------------- |
| isrc                | string | International Standard Recording Code (primary key)        |
| name                | string | Name of the song                                           |
| album               | string | Name of the album the song belongs to                      |
| notes               | string | Notes for the song                                         |
| updated_at          | string | ISO timestamp of when the song data was last updated       |
| artists             | array  | Array of artist objects associated with this song          |
| artists[].id        | string | Unique identifier for the artist account                   |
| artists[].name      | string | Name of the artist (can be null)                           |
| artists[].timestamp | number | Timestamp associated with the artist account (can be null) |

## Database Schema

This endpoint queries the following database tables:

### Songs Table

- **Primary Key**: `isrc` (text)
- **Fields**: `name`, `album`, `notes`, `updated_at`
- **Indexes**: On `name` and `album` fields for performance

### Song Artists Table

- **Primary Key**: `id` (uuid)
- **Foreign Keys**:
  - `song` references `songs.isrc`
  - `artist` references `accounts.id`
- **Unique Constraint**: Combination of `song` and `artist`

### Accounts Table

- **Primary Key**: `id` (uuid)
- **Fields**: `name`, `timestamp`

## Usage Examples

### Get all songs for a specific artist

```bash
curl -X GET "https://api.recoupable.com/api/songs?artist_account_id=550e8400-e29b-41d4-a716-446655440000"
```

### Get a specific song by ISRC

```bash
curl -X GET "https://api.recoupable.com/api/songs?isrc=USRC17607839"
```

### Get all songs (no filters)

```bash
curl -X GET "https://api.recoupable.com/api/songs"
```

## Error Handling

The API uses conventional HTTP response codes:

- `200`: Success
- `400`: Bad Request (invalid parameters)
- `401`: Unauthorized
- `404`: No songs found
- `500`: Internal Server Error

Example error response:

```json filename="Error Response"
{
  "status": "error",
  "error": "No songs found for the specified criteria"
}
```

## Notes

- The `isrc` parameter filters for exact matches
- The `artist_account_id` parameter uses the UUID from the accounts table
- Songs can have multiple artists (many-to-many relationship)
- All timestamps are returned in ISO 8601 format
- The notes field contains notes for the song
- Results are ordered by `updated_at` in descending order (most recent first)
