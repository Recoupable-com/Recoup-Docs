---
title: Catalog Songs API
description: API endpoint to list songs in a catalog (GET), batch add catalog-song links (POST), and batch delete catalog-song links (DELETE); GET supports pagination.
---

# Catalog Songs API

Retrieve songs within a specific catalog. Use GET to list catalog songs with pagination. Use POST to batch add songs to a catalog by ISRC. Use DELETE to batch remove songs from a catalog by ISRC. This endpoint joins the `catalog_songs` table with `catalogs`, `songs`, `song_artists`, and `accounts` to provide comprehensive song information for a given catalog.

## Endpoint

```http
GET https://api.recoupable.com/api/catalogs/songs
POST https://api.recoupable.com/api/catalogs/songs
DELETE https://api.recoupable.com/api/catalogs/songs
```

## GET Parameters

| Name       | Type   | Required | Description                                             |
| ---------- | ------ | -------- | ------------------------------------------------------- |
| catalog_id | string | Yes      | The unique identifier of the catalog to query songs for |
| page       | number | No       | Page number for pagination (default: 1)                 |
| limit      | number | No       | Number of songs per page (default: 20, max: 100)        |

## POST Parameters

| Name               | Type             | Required | Description                                |
| ------------------ | ---------------- | -------- | ------------------------------------------ |
| songs              | array of objects | Yes      | Array of songs for batch updates           |
| songs[].catalog_id | string           | Yes      | Catalog ID to which the song will be added |
| songs[].isrc       | string           | Yes      | Song ISRC to associate to the catalog      |

## DELETE Parameters

| Name               | Type             | Required | Description                                    |
| ------------------ | ---------------- | -------- | ---------------------------------------------- |
| songs              | array of objects | Yes      | Array of songs for batch deletes               |
| songs[].catalog_id | string           | Yes      | Catalog ID from which the song will be removed |
| songs[].isrc       | string           | Yes      | Song ISRC to remove from the catalog           |

### Behavior (DELETE)

- Deletes the relationship in `catalog_songs` for each `{catalog_id, isrc}` pair.
- If either `catalog_id` or `isrc` is missing in any item, an error is returned.
- Request accepts a bulk array under `songs`.
- Response structure is identical to GET and POST (songs array with pagination when applicable).

## Request Examples

::::code-group

```bash [cURL]
curl -X GET "https://api.recoupable.com/api/catalogs/songs?catalog_id=YOUR_CATALOG_ID&page=1&limit=20" \
  -H "Content-Type: application/json"
```

```bash [cURL - POST]
curl -X POST "https://api.recoupable.com/api/catalogs/songs" \
  -H "Content-Type: application/json" \
  -d '{
    "songs": [
      { "catalog_id": "YOUR_CATALOG_ID", "isrc": "USRC17607839" },
      { "catalog_id": "YOUR_CATALOG_ID", "isrc": "USRC17607840" }
    ]
  }'
```

```bash [cURL - DELETE]
curl -X DELETE "https://api.recoupable.com/api/catalogs/songs" \
  -H "Content-Type": "application/json" \
  -d '{
    "songs": [
      { "catalog_id": "YOUR_CATALOG_ID", "isrc": "USRC17607839" },
      { "catalog_id": "YOUR_CATALOG_ID", "isrc": "USRC17607840" }
    ]
  }'
```

```python [Python]
import requests

def get_catalog_songs(catalog_id: str, page: int = 1, limit: int = 20):
    try:
        url = "https://api.recoupable.com/api/catalogs/songs"
        params = {"catalog_id": catalog_id, "page": page, "limit": limit}
        headers = {"Content-Type": "application/json"}
        response = requests.get(url, params=params, headers=headers)
        response.raise_for_status()
        return response.json()
    except requests.exceptions.RequestException as error:
        print(f"Error fetching catalog songs: {error}")
        raise

# Example usage:
# songs = get_catalog_songs("your-catalog-id", page=1, limit=20)


def add_songs_to_catalog(items: list[dict]):
    try:
        url = "https://api.recoupable.com/api/catalogs/songs"
        payload = {"songs": items}
        headers = {"Content-Type": "application/json"}
        response = requests.post(url, json=payload, headers=headers)
        response.raise_for_status()
        return response.json()
    except requests.exceptions.RequestException as error:
        print(f"Error adding songs to catalog: {error}")
        raise

# Example usage:
# result = add_songs_to_catalog([
#   {"catalog_id": "your-catalog-id", "isrc": "USRC17607839"},
#   {"catalog_id": "your-catalog-id", "isrc": "USRC17607840"}
# ])


def remove_songs_from_catalog(items: list[dict]):
    try:
        url = "https://api.recoupable.com/api/catalogs/songs"
        payload = {"songs": items}
        headers = {"Content-Type": "application/json"}
        response = requests.delete(url, json=payload, headers=headers)
        response.raise_for_status()
        return response.json()
    except requests.exceptions.RequestException as error:
        print(f"Error removing songs from catalog: {error}")
        raise
```

```javascript [JavaScript]
async function getCatalogSongs(catalogId, page = 1, limit = 20) {
  try {
    const params = new URLSearchParams({
      catalog_id: catalogId,
      page: page.toString(),
      limit: limit.toString(),
    });

    const response = await fetch(
      `https://api.recoupable.com/api/catalogs/songs?${params.toString()}`,
      {
        headers: {
          "Content-Type": "application/json",
        },
      }
    );

    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    const data = await response.json();
    return data;
  } catch (error) {
    console.error("Error fetching catalog songs:", error);
    throw error;
  }
}

async function addSongsToCatalog(songInputs) {
  try {
    const response = await fetch(
      "https://api.recoupable.com/api/catalogs/songs",
      {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ songs: songInputs }),
      }
    );
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
    return await response.json();
  } catch (error) {
    console.error("Error adding songs to catalog:", error);
    throw error;
  }
}

async function removeSongsFromCatalog(songInputs) {
  try {
    const response = await fetch(
      "https://api.recoupable.com/api/catalogs/songs",
      {
        method: "DELETE",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ songs: songInputs }),
      }
    );
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
    return await response.json();
  } catch (error) {
    console.error("Error removing songs from catalog:", error);
    throw error;
  }
}

// Example usage:
// const result = await addSongsToCatalog([
//   { catalog_id: "your-catalog-id", isrc: "USRC17607839" },
//   { catalog_id: "your-catalog-id", isrc: "USRC17607840" }
// ]);
```

```typescript [TypeScript]
interface Song {
  isrc: string;
  name: string;
  album: string;
  lyrics: string;
  updated_at: string;
  artists: Array<{
    id: string;
    name: string | null;
    timestamp: number | null;
  }>;
}

interface CatalogSongsResponse {
  status: "success" | "error";
  songs: Song[];
  pagination: {
    total_count: number;
    page: number;
    limit: number;
    total_pages: number;
  };
  error?: string;
}

async function getCatalogSongs(
  catalogId: string,
  page: number = 1,
  limit: number = 20
): Promise<CatalogSongsResponse> {
  const params = new URLSearchParams({
    catalog_id: catalogId,
    page: page.toString(),
    limit: limit.toString(),
  });
  const response = await fetch(
    `https://api.recoupable.com/api/catalogs/songs?${params.toString()}`,
    { headers: { "Content-Type": "application/json" } }
  );
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  return (await response.json()) as CatalogSongsResponse;
}

interface AddSongInput {
  catalog_id: string;
  isrc: string;
}

async function addSongsToCatalog(
  inputs: AddSongInput[]
): Promise<CatalogSongsResponse> {
  const response = await fetch(
    "https://api.recoupable.com/api/catalogs/songs",
    {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ songs: inputs }),
    }
  );
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  return (await response.json()) as CatalogSongsResponse;
}

interface DeleteSongInput {
  catalog_id: string;
  isrc: string;
}

async function removeSongsFromCatalog(
  inputs: DeleteSongInput[]
): Promise<CatalogSongsResponse> {
  const response = await fetch(
    "https://api.recoupable.com/api/catalogs/songs",
    {
      method: "DELETE",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ songs: inputs }),
    }
  );
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  return (await response.json()) as CatalogSongsResponse;
}
```

::::

## Response Format

The API returns JSON responses with song data including associated artist information and pagination metadata:

```json filename="Response"
{
  "status": "success",
  "songs": [
    {
      "isrc": "USRC17607839",
      "name": "Bohemian Rhapsody",
      "album": "A Night at the Opera",
      "lyrics": "Is this the real life? Is this just fantasy? Caught in a landslide, no escape from reality...",
      "updated_at": "2024-03-06T15:33:27Z",
      "artists": [
        {
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "name": "Queen",
          "timestamp": 1640995200000
        }
      ]
    },
    {
      "isrc": "USRC17607840",
      "name": "We Will Rock You",
      "album": "News of the World",
      "lyrics": "Buddy, you're a boy, make a big noise, playing in the street, gonna be a big man someday...",
      "updated_at": "2024-03-05T18:22:15Z",
      "artists": [
        {
          "id": "550e8400-e29b-41d4-a716-446655440000",
          "name": "Queen",
          "timestamp": 1640995200000
        }
      ]
    }
  ],
  "pagination": {
    "total_count": 42,
    "page": 1,
    "limit": 20,
    "total_pages": 3
  }
}
```

## Response Properties

### Response Object

| Property   | Type   | Description                                       |
| ---------- | ------ | ------------------------------------------------- |
| status     | string | Status of the request ("success" or "error")      |
| songs      | array  | Array of song objects with artist information     |
| pagination | object | Pagination metadata for the response              |
| error      | string | Error message (only present if status is "error") |

### Song Object

| Property            | Type   | Description                                                |
| ------------------- | ------ | ---------------------------------------------------------- |
| isrc                | string | International Standard Recording Code (primary key)        |
| name                | string | Name of the song                                           |
| album               | string | Name of the album the song belongs to                      |
| lyrics              | string | Full lyrics of the song                                    |
| updated_at          | string | ISO timestamp of when the song data was last updated       |
| artists             | array  | Array of artist objects associated with this song          |
| artists[].id        | string | Unique identifier for the artist account                   |
| artists[].name      | string | Name of the artist (can be null)                           |
| artists[].timestamp | number | Timestamp associated with the artist account (can be null) |

### Pagination Object

| Property    | Type   | Description                          |
| ----------- | ------ | ------------------------------------ |
| total_count | number | Total number of songs in the catalog |
| page        | number | Current page number                  |
| limit       | number | Number of songs per page             |
| total_pages | number | Total number of pages available      |

## Database Schema

This endpoint queries the following database tables:

### Catalog Songs Table

- **Primary Key**: `id` (uuid)
- **Foreign Keys**:
  - `catalog` references `catalogs.id`
  - `song` references `songs.isrc`
- **Unique Constraint**: Combination of `catalog` and `song`
- **Indexes**: On `catalog`, `song`, and `created_at` fields for performance

### Catalogs Table

- **Primary Key**: `id` (uuid)
- **Fields**: `name`, `created_at`, `updated_at`
- **Indexes**: On `name` and `created_at` fields for performance

### Songs Table

- **Primary Key**: `isrc` (text)
- **Fields**: `name`, `album`, `lyrics`, `updated_at`
- **Indexes**: On `name` and `album` fields for performance

### Song Artists Table

- **Primary Key**: `id` (uuid)
- **Foreign Keys**:
  - `song`
