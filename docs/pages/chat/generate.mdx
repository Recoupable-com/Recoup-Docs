---
title: Chat Generate API
description: Generate AI-powered text responses using the Recoup chat system.
---

# Chat Generate API

Generate AI-powered text responses using the Recoup chat system. This endpoint processes chat requests and returns generated text along with metadata about the generation process.

## Endpoint

```http
POST https://chat.recoupable.com/api/chat/generate
```

### Authentication

All requests to this endpoint must be authenticated using an API key header:

| Header    | Type   | Required | Description                                                                                               |
| --------- | ------ | -------- | --------------------------------------------------------------------------------------------------------- |
| x-api-key | string | Yes      | Your Recoup API key. See [Getting Started](/getting-started#-api-keys) for how to create and manage keys. |

## Parameters

| Name         | Type   | Required | Description                                                                                                                                         |
| ------------ | ------ | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| prompt       | string | No       | Single text prompt for the assistant. Required if `messages` is not provided.                                                                       |
| messages     | array  | No       | Array of [UIMessage](https://ai-sdk.dev/docs/reference/ai-sdk-core/ui-message#uimessage) objects for context. Required if `prompt` is not provided. |
| artistId     | string | No       | The unique identifier of the artist (optional)                                                                                                      |
| model        | string | No       | The AI model to use for text generation (optional)                                                                                                  |
| excludeTools | array  | No       | Array of tool names to exclude from execution (e.g., `["create_scheduled_actions"]`)                                                                |
| roomId       | string | No       | UUID of the chat room. If not provided, one will be generated automatically. Use [Create Chat](/chat/create) to create a chat beforehand.           |

> Exactly one of `messages` or `prompt` should be provided in each request.

## Request Examples

:::code-group

```bash [cURL]
curl -X POST "https://chat.recoupable.com/api/chat/generate" \
  -H "Content-Type: application/json" \
  -H "x-api-key: YOUR_API_KEY" \
  -d '{
    "prompt": "Hello, how are you?",
    "model": "openai/gpt-5-mini",
    "excludeTools": ["create_scheduled_actions"]
  }'
```

```python [Python]
import requests

def generate_chat(prompt=None, messages=None, artist_id=None, model=None, exclude_tools=None):
    url = "https://chat.recoupable.com/api/chat/generate"
    payload = {}
    if prompt is not None:
        payload["prompt"] = prompt
    if messages is not None:
        payload["messages"] = messages
    if artist_id:
        payload["artistId"] = artist_id
    if model:
        payload["model"] = model
    if exclude_tools:
        payload["excludeTools"] = exclude_tools

    headers = {
        "Content-Type": "application/json",
        "x-api-key": "YOUR_API_KEY",
    }

    response = requests.post(url, json=payload, headers=headers)
    response.raise_for_status()
    result = response.json()

    # Extract text content from ContentPart array
    text_content = ""
    for part in result["text"]:
        if part["type"] == "text":
            text_content += part["text"]

    print(f"Generated text: {text_content}")
    return result

# Example usage:
# result = generate_chat(
#     prompt="Hello, how are you?",
#     model="openai/gpt-5-mini",
#     exclude_tools=["create_scheduled_actions"],
# )
#
# # Access the text content
# text_content = ""
# for part in result["text"]:
#     if part["type"] == "text":
#         text_content += part["text"]
```

```javascript [JavaScript]
async function generateChat({
  prompt,
  messages,
  artistId,
  model,
  excludeTools,
} = {}) {
  const payload = {};

  if (prompt != null) payload.prompt = prompt;
  if (messages != null) payload.messages = messages;
  if (artistId != null) payload.artistId = artistId;
  if (model != null) payload.model = model;
  if (excludeTools != null) payload.excludeTools = excludeTools;

  const response = await fetch(
    "https://chat.recoupable.com/api/chat/generate",
    {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "x-api-key": "YOUR_API_KEY",
      },
      body: JSON.stringify(payload),
    }
  );

  if (!response.ok) throw new Error("Chat generation failed");
  const result = await response.json();

  // Extract text content from ContentPart array
  const textContent = result.text
    .filter((part) => part.type === "text")
    .map((part) => part.text)
    .join("");

  console.log("Generated text:", textContent);

  return result;
}

// Example usage:
// const result = await generateChat({
//   prompt: "Hello, how are you?",
//   model: "openai/gpt-5-mini",
//   excludeTools: ["create_scheduled_actions"],
// });
//
// // Access the text content
// const textContent = result.text
//   .filter(part => part.type === 'text')
//   .map(part => part.text)
//   .join('');
```

```typescript [TypeScript]
import { UIMessage, ContentPart } from "ai";

interface ChatRequest {
  prompt?: string;
  messages?: UIMessage[];
  artistId?: string;
  model?: string;
  excludeTools?: string[];
}

interface ChatResponse {
  text: ContentPart[];
  reasoningText?: string;
  sources?: any[];
  finishReason: string;
  usage: {
    inputTokens: number;
    outputTokens: number;
    totalTokens: number;
    reasoningTokens: number;
    cachedInputTokens: number;
  };
  response: {
    messages: any[];
    headers: any;
    body: any;
  };
}

async function generateChat(request: ChatRequest): Promise<ChatResponse> {
  const response = await fetch(
    "https://chat.recoupable.com/api/chat/generate",
    {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "x-api-key": "YOUR_API_KEY",
      },
      body: JSON.stringify(request),
    }
  );

  if (!response.ok) throw new Error("Chat generation failed");
  const result = await response.json();

  // Extract text content from ContentPart array
  const textContent = result.text
    .filter((part) => part.type === "text")
    .map((part) => part.text)
    .join("");

  console.log("Generated text:", textContent);

  return result;
}

// Example usage:
// const response = await generateChat({
//   prompt: "Hello, how are you?",
//   model: "openai/gpt-5-mini",
//   excludeTools: ["create_scheduled_actions"],
// });
//
// // Access the text content
// const textContent = response.text
//   .filter(part => part.type === 'text')
//   .map(part => part.text)
//   .join('');
```

:::

## Example Response

```json
{
  "text": [
    {
      "type": "text",
      "text": "Hello! I'm here to help you with any questions or tasks you might have. How can I assist you today?"
    }
  ],
  "reasoningText": "The user greeted me, so I should respond with a friendly greeting and offer to help.",
  "sources": [],
  "finishReason": "stop",
  "usage": {
    "inputTokens": 8365,
    "outputTokens": 106,
    "totalTokens": 8471,
    "reasoningTokens": 64,
    "cachedInputTokens": 0
  },
  "response": {
    "messages": [],
    "headers": {},
    "body": {}
  }
}
```

## Response Properties

| Property                | Type                                  | Description                                                                                                                                                  |
| ----------------------- | ------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| text                    | Array&lt;ContentPart&lt;TOOLS&gt;&gt; | Array of content parts from the AI model response. [Learn more about ContentPart types](https://ai-sdk.dev/docs/reference/ai-sdk-core/generate-text#content) |
| reasoningText           | string                                | Optional reasoning or explanation for the response                                                                                                           |
| sources                 | array                                 | Optional array of sources used for the response                                                                                                              |
| finishReason            | string                                | The reason why the generation finished                                                                                                                       |
| usage                   | object                                | Token usage information with detailed breakdown                                                                                                              |
| usage.inputTokens       | number                                | Number of input tokens processed                                                                                                                             |
| usage.outputTokens      | number                                | Number of output tokens generated                                                                                                                            |
| usage.totalTokens       | number                                | Total tokens used (input + output)                                                                                                                           |
| usage.reasoningTokens   | number                                | Number of reasoning tokens used                                                                                                                              |
| usage.cachedInputTokens | number                                | Number of cached input tokens                                                                                                                                |
| response                | object                                | Additional response metadata and information                                                                                                                 |

## Notes

- The `text` field contains an array of content parts that need to be processed to extract the actual text content
- Use the `finishReason` to determine if the generation completed successfully
- The `usage` object provides detailed token consumption information for cost tracking
- The `reasoningText` field contains the AI model's internal reasoning process
